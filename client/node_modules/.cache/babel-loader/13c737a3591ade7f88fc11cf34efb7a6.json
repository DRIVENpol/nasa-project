{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paulsocarde/Desktop/nasa-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/paulsocarde/Desktop/nasa-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/paulsocarde/Desktop/nasa-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { httpGetLaunches, httpSubmitLaunch, httpAbortLaunch } from './requests';\nfunction useLaunches(onSuccessSound, onAbortSound, onFailureSound) {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    launches = _useState2[0],\n    saveLaunches = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isPendingLaunch = _useState4[0],\n    setPendingLaunch = _useState4[1];\n  var getLaunches = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var fetchedLaunches;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return httpGetLaunches();\n          case 2:\n            fetchedLaunches = _context.sent;\n            saveLaunches(fetchedLaunches);\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n  useEffect(function () {\n    getLaunches();\n  }, [getLaunches]);\n  var submitLaunch = useCallback( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var data, launchDate, mission, rocket, target, response, success;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              // setPendingLaunch(true);\n              data = new FormData(e.target);\n              launchDate = new Date(data.get(\"launch-day\"));\n              mission = data.get(\"mission-name\");\n              rocket = data.get(\"rocket-name\");\n              target = data.get(\"planets-selector\");\n              _context2.next = 8;\n              return httpSubmitLaunch({\n                launchDate: launchDate,\n                mission: mission,\n                rocket: rocket,\n                target: target\n              });\n            case 8:\n              response = _context2.sent;\n              // TODO: Set success based on response.\n              success = false;\n              if (success) {\n                getLaunches();\n                setTimeout(function () {\n                  setPendingLaunch(false);\n                  onSuccessSound();\n                }, 800);\n              } else {\n                onFailureSound();\n              }\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [getLaunches, onSuccessSound, onFailureSound]);\n  var abortLaunch = useCallback( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      var response, success;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return httpAbortLaunch(id);\n            case 2:\n              response = _context3.sent;\n              // TODO: Set success based on response.\n              success = false;\n              if (success) {\n                getLaunches();\n                onAbortSound();\n              } else {\n                onFailureSound();\n              }\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return function (_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [getLaunches, onAbortSound, onFailureSound]);\n  return {\n    launches: launches,\n    isPendingLaunch: isPendingLaunch,\n    submitLaunch: submitLaunch,\n    abortLaunch: abortLaunch\n  };\n}\nexport default useLaunches;","map":{"version":3,"names":["useCallback","useEffect","useState","httpGetLaunches","httpSubmitLaunch","httpAbortLaunch","useLaunches","onSuccessSound","onAbortSound","onFailureSound","launches","saveLaunches","isPendingLaunch","setPendingLaunch","getLaunches","fetchedLaunches","submitLaunch","e","preventDefault","data","FormData","target","launchDate","Date","get","mission","rocket","response","success","setTimeout","abortLaunch","id"],"sources":["/Users/paulsocarde/Desktop/nasa-project/client/src/hooks/useLaunches.jsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\n\nimport {\n  httpGetLaunches,\n  httpSubmitLaunch,\n  httpAbortLaunch,\n} from './requests';\n\nfunction useLaunches(onSuccessSound, onAbortSound, onFailureSound) {\n  const [launches, saveLaunches] = useState([]);\n  const [isPendingLaunch, setPendingLaunch] = useState(false);\n\n  const getLaunches = useCallback(async () => {\n    const fetchedLaunches = await httpGetLaunches();\n    saveLaunches(fetchedLaunches);\n  }, []);\n\n  useEffect(() => {\n    getLaunches();\n  }, [getLaunches]);\n\n  const submitLaunch = useCallback(async (e) => {\n    e.preventDefault();\n    // setPendingLaunch(true);\n    const data = new FormData(e.target);\n    const launchDate = new Date(data.get(\"launch-day\"));\n    const mission = data.get(\"mission-name\");\n    const rocket = data.get(\"rocket-name\");\n    const target = data.get(\"planets-selector\");\n    const response = await httpSubmitLaunch({\n      launchDate,\n      mission,\n      rocket,\n      target,\n    });\n\n    // TODO: Set success based on response.\n    const success = false;\n    if (success) {\n      getLaunches();\n      setTimeout(() => {\n        setPendingLaunch(false);\n        onSuccessSound();\n      }, 800);\n    } else {\n      onFailureSound();\n    }\n  }, [getLaunches, onSuccessSound, onFailureSound]);\n\n  const abortLaunch = useCallback(async (id) => {\n    const response = await httpAbortLaunch(id);\n\n    // TODO: Set success based on response.\n    const success = false;\n    if (success) {\n      getLaunches();\n      onAbortSound();\n    } else {\n      onFailureSound();\n    }\n  }, [getLaunches, onAbortSound, onFailureSound]);\n\n  return {\n    launches,\n    isPendingLaunch,\n    submitLaunch,\n    abortLaunch,\n  };\n}\n\nexport default useLaunches;"],"mappings":";;;AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAExD,SACEC,eAAe,EACfC,gBAAgB,EAChBC,eAAe,QACV,YAAY;AAEnB,SAASC,WAAW,CAACC,cAAc,EAAEC,YAAY,EAAEC,cAAc,EAAE;EAAA,gBAChCP,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAtCQ,QAAQ;IAAEC,YAAY;EAAA,iBACeT,QAAQ,CAAC,KAAK,CAAC;IAAA;IAApDU,eAAe;IAAEC,gBAAgB;EAExC,IAAMC,WAAW,GAAGd,WAAW,wEAAC;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACAG,eAAe,EAAE;UAAA;YAAzCY,eAAe;YACrBJ,YAAY,CAACI,eAAe,CAAC;UAAC;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAC/B,IAAE,EAAE,CAAC;EAENd,SAAS,CAAC,YAAM;IACda,WAAW,EAAE;EACf,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EAEjB,IAAME,YAAY,GAAGhB,WAAW;IAAA,qEAAC,kBAAOiB,CAAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACvCA,CAAC,CAACC,cAAc,EAAE;cAClB;cACMC,IAAI,GAAG,IAAIC,QAAQ,CAACH,CAAC,CAACI,MAAM,CAAC;cAC7BC,UAAU,GAAG,IAAIC,IAAI,CAACJ,IAAI,CAACK,GAAG,CAAC,YAAY,CAAC,CAAC;cAC7CC,OAAO,GAAGN,IAAI,CAACK,GAAG,CAAC,cAAc,CAAC;cAClCE,MAAM,GAAGP,IAAI,CAACK,GAAG,CAAC,aAAa,CAAC;cAChCH,MAAM,GAAGF,IAAI,CAACK,GAAG,CAAC,kBAAkB,CAAC;cAAA;cAAA,OACpBpB,gBAAgB,CAAC;gBACtCkB,UAAU,EAAVA,UAAU;gBACVG,OAAO,EAAPA,OAAO;gBACPC,MAAM,EAANA,MAAM;gBACNL,MAAM,EAANA;cACF,CAAC,CAAC;YAAA;cALIM,QAAQ;cAOd;cACMC,OAAO,GAAG,KAAK;cACrB,IAAIA,OAAO,EAAE;gBACXd,WAAW,EAAE;gBACbe,UAAU,CAAC,YAAM;kBACfhB,gBAAgB,CAAC,KAAK,CAAC;kBACvBN,cAAc,EAAE;gBAClB,CAAC,EAAE,GAAG,CAAC;cACT,CAAC,MAAM;gBACLE,cAAc,EAAE;cAClB;YAAC;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CACF;IAAA;MAAA;IAAA;EAAA,KAAE,CAACK,WAAW,EAAEP,cAAc,EAAEE,cAAc,CAAC,CAAC;EAEjD,IAAMqB,WAAW,GAAG9B,WAAW;IAAA,qEAAC,kBAAO+B,EAAE;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OAChB1B,eAAe,CAAC0B,EAAE,CAAC;YAAA;cAApCJ,QAAQ;cAEd;cACMC,OAAO,GAAG,KAAK;cACrB,IAAIA,OAAO,EAAE;gBACXd,WAAW,EAAE;gBACbN,YAAY,EAAE;cAChB,CAAC,MAAM;gBACLC,cAAc,EAAE;cAClB;YAAC;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CACF;IAAA;MAAA;IAAA;EAAA,KAAE,CAACK,WAAW,EAAEN,YAAY,EAAEC,cAAc,CAAC,CAAC;EAE/C,OAAO;IACLC,QAAQ,EAARA,QAAQ;IACRE,eAAe,EAAfA,eAAe;IACfI,YAAY,EAAZA,YAAY;IACZc,WAAW,EAAXA;EACF,CAAC;AACH;AAEA,eAAexB,WAAW"},"metadata":{},"sourceType":"module"}